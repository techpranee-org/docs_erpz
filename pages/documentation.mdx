import Pagination from '../components/Pagination';
import pages from '../utils/order';
import { fetchPageData } from '../lib/api';
import remarkGfm from 'remark-gfm'; 
import remarkParse from 'remark-parse';
import remarkRehype from 'remark-rehype';
import {unified} from 'unified';
import matter from 'gray-matter';
import rehypeStringify from 'rehype-stringify';





export async function getStaticProps() {
  const slug = 'documentation';
  const page = await fetchPageData(slug); // Use the correct slug

  if (!page || page.length === 0 || !page.content) {
    return {
      notFound: true, // Return 404 if content is missing
    };
  }

  const processor = unified()
                          .use(remarkParse)
                          .use(remarkGfm)
                          .use(remarkRehype)
                          .use(rehypeStringify)

  const { content } = matter(page.content);

const htmlContent = (await processor.process(content)).toString();



  return {
    props: {
      htmlContent,
    },
  };
}
 

export default function DocumentPage({ htmlContent }) {
  return (
    <div className='w-full'>
      <div className='prose dark:prose-invert' dangerouslySetInnerHTML={{__html: htmlContent}}></div>
      <Pagination
        pages={pages}
      />
    </div>
  );
}  



